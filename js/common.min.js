window.onscroll=function(){if(document.getElementById("head_panel"))fixed_panel()};window.cookie={getCookie:function(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined},setCookie:function(name,value,props){props=props||{};var exp=props.expires;if(typeof exp=="number"&&exp){var d=new Date;d.setTime(d.getTime()+exp*1e3);exp=props.expires=d}if(exp&&exp.toUTCString){props.expires=exp.toUTCString()}value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in props){updatedCookie+="; "+propName;var propValue=props[propName];if(propValue!==true){updatedCookie+="="+propValue}}document.cookie=updatedCookie},deleteCookie:function(name){setCookie(name,null,{expires:-1})}};function parallax(e,elems){elems.forEach(elem=>{const x=(e.clientX-window.innerWidth/20-elem.offsetWidth)*elem.dataset.offsetX;const y=(e.clientY-window.innerHeight/20-elem.offsetHeight)*elem.dataset.offsetY;elem.style.transform=`translateX(${x}px) translateY(${y}px)`})}$(document).ready(function(){if(document.getElementById("head_panel"))fixed_panel();jQuery.fn.extend({showLoader:function(){if($(this).children(".ajax-loader").length==0){$(this).append('<div class="ajax-loader"><div class="spinner"><div></div><div></div><div></div><div></div></div></div>')}var style=window.getComputedStyle?getComputedStyle($(this)[0],null):$(this)[0].currentStyle;if(style["position"]==="static"){$(this).addClass("relative")}if($(this).is("body")){$(this).children(".ajax-loader").first().addClass("fixed")}$(this).children(".ajax-loader").first().addClass("show")},hideLoader:function(){if($(this).children(".ajax-loader").length>0){$(this).children(".ajax-loader").remove()}}});$.ajaxSetup({cache:false});var body=$("body"),html=body.width(),timer;$(window).on("scroll",function(){clearTimeout(timer);if(!body.hasClass("disable-hover")){body.addClass("disable-hover")}timer=setTimeout(function(){body.removeClass("disable-hover")},200)});document.querySelectorAll(".parallax-area").forEach(area=>{area.addEventListener("mousemove",function(e){console.log(this);parallax(e,this.querySelectorAll(".parallax"))})});if($(".js-pins-slider").length>0){$(".js-pins-slider").each(function(){var self=$(this);$(window).resize(function(e){if(body.width()<768){if(!self.hasClass("slick-initialized")){self.slick({infinite:true,slidesToShow:2,dots:true,arrows:false,appendDots:self.parent().find(".js-pins-slider-pagination")})}}else{if(self.hasClass("slick-initialized")){self.slick("unslick")}}}).resize()})}if($(".js-hide-alert").length>0){setTimeout(function(){$(".js-hide-alert").slideUp(1e3,function(){$(this).remove()})},5e3)}$(".js-smooth-scroll-link").on("click",function(e){e.preventDefault();var id=$(this).attr("href"),top=$(id).offset().top;$("html, body").animate({scrollTop:top},300)});$(".js-open-callback-popup-btn").on("click",function(e){e.preventDefault();$(".js-popup-callback").remove();$.ajax({url:"index.php?route=common/popup/callback",type:"post",dataType:"json",beforeSend:function(){$("body").showLoader()},complete:function(){$("body").hideLoader()},success:function(response){if(response.html){$("body").append(response.html);initPhoneMask();$("#sendCallRequest").bind("submit",function(e){e.preventDefault();var form_el=$(this);form_el.find(".is-error").removeClass("is-error");var name_el=form_el.find("input[name=name]");if($.trim(name_el.val()).length<2)name_el.closest(".form-group").addClass("is-error");else name_el.closest(".form-group").removeClass("is-error");var phone_el=form_el.find("input[name=phone]");if($.trim(phone_el.val()).length<2||!validatePhone(phone_el.val()))phone_el.closest(".form-group").addClass("is-error");else phone_el.closest(".form-group").removeClass("is-error");var policy_el=form_el.find("input[name=privacy-policy]");if(!policy_el.is(":checked")){policy_el.closest(".form-group").addClass("is-error")}else{policy_el.closest(".form-group").removeClass("is-error")}if(form_el.find(".is-error").length===0){ajax_sendmessage(form_el,"/index.php?route=common/home/sendmess",function(data){if(data["status"]){if(data["status"]==="ok"){form_el.closest(".popup__content").html('<p class="popup__subtitle text-center">'+data["text"]+"</p>")}else{form_el.closest(".popup__content").find(".error_message").addClass("is-error").html('<div class="form-group__error">'+data["text"]+"</div>")}}})}return false})}}})});$(".js-open-feedback-form-popup-btn").on("click",function(e){e.preventDefault();$.ajax({url:"index.php?route=common/review_vc/get_form",type:"post",dataType:"json",beforeSend:function(){$("body").showLoader()},complete:function(){$("body").hideLoader()},success:function(json){$("#ReviewVcPopup").remove();$("body").append(json["form"]);$(".js-popup-feedback-form").fadeIn(300);$("html").addClass("is-fixed");initPopupClose()},error:function(xhr,ajaxOptions,thrownError){$("body").hideLoader()}})});$(".js-open-follow-popup-btn").on("click",function(e){e.preventDefault();$(".js-popup-follow").fadeIn(300);$("html").addClass("is-fixed")});$(".js-open-faq-popup-btn").on("click",function(e){e.preventDefault();var faq_id=$(this).data("faqId");$.ajax({url:"index.php?route=extension/module/vc_faq/show_dialog",type:"post",data:"faq_id="+faq_id,dataType:"json",beforeSend:function(){$("body").showLoader()},complete:function(){$("body").hideLoader()},success:function(json){$(".js-popup-faq").remove();if(json&&json["state"]=="success"){$("body").append(json["html"]);$(".js-popup-faq").fadeIn(300);$("html").addClass("is-fixed");setFaqViewed(faq_id);initPopupClose()}},error:function(xhr,ajaxOptions,thrownError){$("body").hideLoader()}});return false});$(document).on("click",".js-open-quick-buy-popup-btn",function(e){e.preventDefault();let is_cart=$(this).data("is_cart"),product_id=$(".product-area").data("id")??0;$.post("index.php?route=common/popup/buy_one_click",{product_id:product_id,is_cart:is_cart},function(response){if(response.html)$("body").append(response.html)})});$(".js-toggle-mobile-search-btn").on("click",function(e){e.preventDefault();$(".js-search").toggleClass("is-opened")});$(".js-open-menu-btn").on("click",function(e){e.preventDefault();$(".js-menu").toggleClass("is-opened");if(!$(".js-catalog-menu").hasClass("is-opened")){$("html").toggleClass("is-fixed",$(".js-menu").hasClass("is-opened"))}});$(".js-back-menu-btn").on("click",function(e){if($(this).closest(".section-selected").length>0){if($(this).closest(".section-selected").hasClass("category-selected")){$(this).closest(".section-selected").removeClass("category-selected")}else{$(this).closest(".section-selected").removeClass("section-selected")}}else if($(this).closest(".category-selected").length>0){$(this).closest(".category-selected").removeClass("category-selected")}});$(".js-close-menu-btn").on("click",function(e){e.preventDefault();$(".js-menu").removeClass("is-opened");if(!$(".js-catalog-menu").hasClass("is-opened")){$("html").toggleClass("is-fixed",$(".js-menu").hasClass("is-opened"))}});$(".js-show-more-categories-list").on("click",function(e){e.preventDefault();$(this).closest(".catalog-menu__categories-list").addClass("show-all");$(this).closest(".catalog-menu__categories-list_wrapper").overlayScrollbars({overflowBehavior:{x:"hidden"}})});$(".js_menu-tab-btn").each(function(){$(this).on("click",function(e){e.preventDefault();var tabs=$(this).parents(".tabs");tabs.find(".js_menu-tab-btn").removeClass("is-active").removeClass("selected");$(this).addClass("selected").addClass("is-active");$(this).closest(".site-menu").addClass("section-selected");tabs.find(".js-tab-content").removeClass("is-active").removeClass("selected");tabs.find(".js-tab-content").eq($(this).index()).addClass("is-active").addClass("selected")})});$(".catalog-menu__nav a").on("click",function(e){if($(this).hasClass("has-children")){e.preventDefault();var id=$(this).closest("li").attr("data-id");$(this).closest("ul").find("li").removeClass("selected");$(this).closest("li").addClass("selected");$(this).closest(".catalog-menu-store").find(".js-catalog-menu-categories").removeClass("selected");$(this).closest(".catalog-menu-store").find('.js-catalog-menu-categories[data-id="'+id+'"]').addClass("selected");$(this).closest(".site-menu").addClass("category-selected");$(this).closest(".catalog-menu").addClass("category-selected");return false}});$(".catalog-menu__nav li").on("mouseenter",function(e){var id=$(this).attr("data-id");$(this).closest(".catalog-menu-store").find(".js-catalog-menu-categories").removeClass("is-active");$(this).closest(".catalog-menu-store").find('.js-catalog-menu-categories[data-id="'+id+'"]').addClass("is-active")});$(".js-open-catalog-menu-btn").on("click",function(e){e.preventDefault();$(".js-catalog-menu").toggleClass("is-opened");$("html").toggleClass("is-fixed")});$(".js-close-catalog-menu-btn").on("click",function(e){e.preventDefault();$(".js-catalog-menu").removeClass("is-opened");$("html").removeClass("is-fixed")});if(html<767){$(".catalog-menu__categories--block .catalog-menu__title").on("click",function(e){e.preventDefault();$(this).toggleClass("is-active");$(this).parents(".catalog-menu__categories--block").find(".catalog-menu__brands-wrapper").stop().slideToggle(250);$(this).parents(".catalog-menu__categories--block").find(".catalog-menu__categories-lists_wrapper").stop().slideToggle(250)});$(".js_catalog-menu__categories-list_title").on("click",function(e){e.preventDefault();$(this).toggleClass("is-active");$(this).parents(".catalog-menu__categories-list").find("ul").stop().slideToggle(250)})}$(".js-toggle-site-search-btn").on("click",function(e){e.preventDefault();$(this).toggleClass("is-active");$(".js-site-search").toggleClass("is-opened");$(".site-header-pages").toggle(!$(".js-site-search").hasClass("is-opened"))});$(".js-toggle-order-details-btn").on("click",function(e){e.preventDefault();$(this).toggleClass("is-toggled");$(this).parents(".cabinet-order").find(".js-order-details").stop().slideToggle(250)});$(".js_copy_link").click(function(){copyTextToClipboard($(this).attr("href"));return false});$(".js-toggle-cart-order-information-btn").on("click",function(e){e.preventDefault();$(this).toggleClass("is-toggled");$(this).parents(".cart-order-information").find(".hidden-responsive-list").stop().slideToggle(150)});$(".cart-ordering-step.is-validate").on("click",".cart-ordering-step__header",function(e){e.preventDefault();$(this).parents(".cart-ordering-step.is-validate").find(".cart-ordering-step__body").stop().slideToggle(250)});$(".delivery-company__terms-link").on("click",function(e){e.preventDefault();$(this).parents(".delivery-company").find(".delivery-company__map").stop().slideToggle(250)});$(".js-toggle-article-card-content-btn").on("click",function(e){e.preventDefault();if(!$(this).hasClass("is-toggled")){if($(this).data("type")=="faq"){setFaqViewed($(this).data("id"))}}$(this).toggleClass("is-toggled");$(this).parents(".article-card").find(".article-card__content").stop().slideToggle(250)});$(".js-toggle-items-btn").on("click",function(e){e.preventDefault();$(this).toggleClass("is-toggled");$(this).closest(".toggled-parent").find(".toggled-item").stop().slideToggle(250)});$(".has-sublist span").on("click",function(e){e.preventDefault();var has_sublist=$(this).closest(".has-sublist");var sublist=$(this).next(".sublist");if(sublist.hasClass("is-active")){has_sublist.removeClass("is-current");sublist.removeClass("is-active");$(this).removeClass("is-toggled");sublist.stop().slideUp(200)}else{has_sublist.addClass("is-current");sublist.addClass("is-active");$(this).addClass("is-toggled");sublist.stop().slideDown(200)}});$(document).on("click",".js-product-quantity",function(event){var input=$(this).find("input[type=number]"),value=input.val(),target=$(event.target);if(target.attr("data-action")=="plus"){value++;input.val(value);input.trigger("change")}else if(target.attr("data-action")=="minus"){if(input.val()<=1){return}value--;input.val(value);input.trigger("change")}});if($(".js-promo-slider").length>0){$(".js-promo-slider").slick({infinite:true,dots:true,appendDots:$(".js-promo-slider-pagination"),prevArrow:$(".js-promo-slider-btn-prev"),nextArrow:$(".js-promo-slider-btn-next"),autoplay:true,autoplaySpeed:5e3})}if($(".js-promo-slider-full").length>0){$(".js-promo-slider-full").slick({infinite:true,dots:true,appendDots:$(".js-promo-slider-full-pagination"),prevArrow:$(".js-promo-slider-full-btn-prev"),nextArrow:$(".js-promo-slider-full-btn-next"),autoplay:true,centerMode:true,variableWidth:true,autoplaySpeed:8e3})}if($(".js-advantages-slider").length>0){$(".js-advantages-slider").slick({infinite:true,dots:true,arrows:false,slidesToShow:5,appendDots:$(".js-advantages-slider-pagination"),responsive:[{breakpoint:1365,settings:{slidesToShow:4}},{breakpoint:1100,settings:{slidesToShow:3}},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2}}]})}if($(".js-promo-products-cards-slider").length>0){$(".js-promo-products-cards-slider").slick({infinite:true,dots:true,arrows:false,appendDots:$(".js-promo-products-cards-slider-pagination"),responsive:[{breakpoint:1201,settings:{slidesToShow:4}},{breakpoint:1e3,settings:{slidesToShow:3}},{breakpoint:800,settings:{slidesToShow:2}},{breakpoint:620,settings:{slidesToShow:1}}]})}$(".js-products-slider-by-section").each(function(){var obj=$(this);var module_id=obj.data("mid");$(".js-section-button",obj).click(function(){if(!$(this).hasClass("is-active")){var slider_area=$(obj).find(".js-products-cards-slider");if(slider_area){$(".js-section-button",obj).removeClass("is-active");$(this).addClass("is-active");$.ajax({url:"index.php?route=extension/module/vc_products_slider_by_section/getProducts",type:"post",data:{module_id:module_id,section_index:$(this).data("sectionIndex")},dataType:"html",beforeSend:function(){$(slider_area).closest(".container").showLoader()},complete:function(){$(slider_area).closest(".container").hideLoader()},success:function(response){slider_area.slick("unslick").html(response);initProductCardSlider(slider_area)},error:function(xhr,ajaxOptions,thrownError){$(slider_area).closest(".container").hideLoader()}})}}})});if($(".js-products-cards-slider").length>0){$(".js-products-cards-slider").each(function(){var self=$(this);initProductCardSlider(self)})}if($(".js-tab-controls-slider").length>0){$(".js-tab-controls-slider").each(function(){var self=$(this);self.slick({infinite:true,slidesToShow:5,dots:false,prevArrow:self.parents(".tab-controls-slider__wrapper").find(".js-tab-controls-slider-btn-prev"),nextArrow:self.parents(".tab-controls-slider__wrapper").find(".js-tab-controls-slider-btn-next")})});if(html<768){$(".js-tab-controls-slider").each(function(){$(this).slick("unslick")})}}if($(".js-our-brands-slider").length>0){$(".js-our-brands-slider").slick({infinite:true,dots:true,slidesToShow:5,prevArrow:$(".js-our-brands-slider-btn-prev"),nextArrow:$(".js-our-brands-slider-btn-next"),appendDots:$(".js-our-brands-slider-pagination"),autoplay:true,autoplaySpeed:5e3,responsive:[{breakpoint:1100,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:620,settings:{slidesToShow:2,slidesToScroll:2}}]})}if($(".js-faq-slider").length>0){$(".js-faq-slider").slick({infinite:true,dots:true,slidesToShow:6,prevArrow:$(".js-faq-slider-btn-prev"),nextArrow:$(".js-faq-slider-btn-next"),appendDots:$(".js-faq-slider-pagination"),responsive:[{breakpoint:1550,settings:{slidesToShow:5}},{breakpoint:1281,settings:{slidesToShow:4}},{breakpoint:992,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2}}]})}$(".js-open-feedback-popup-btn").on("click",function(e){e.preventDefault();var id=$(this).data("id");$.ajax({url:"index.php?route=extension/module/vc_review/show_dialog",type:"post",dataType:"json",data:"id="+id,beforeSend:function(){$("body").showLoader()},complete:function(){$("body").hideLoader()},success:function(json){$(".js-popup-feedback").remove();$("body").append(json["html"]);$(".js-popup-feedback").fadeIn(300);$("html").addClass("is-fixed");if($(".js-feedback-gallery-slider").length>0){$(".js-feedback-gallery-slider").each(function(){var self=$(this);self.on("init",function(slick){$(this).parents(".slider-with-loading").addClass("is-loaded")});self.slick({infinite:true,dots:true,swipe:false,slidesToScroll:3,slidesToShow:3,appendDots:self.parents(".feedback-gallery").find(".js-feedback-gallery-slider-pagination"),prevArrow:self.parents(".feedback-gallery").find(".js-feedback-gallery-slider-btn-prev"),nextArrow:self.parents(".feedback-gallery").find(".js-feedback-gallery-slider-btn-next"),responsive:[{breakpoint:621,settings:{slidesToShow:1,variableWidth:true,slidesToScroll:1}}]})});$(".js-feedback-gallery-slider [data-fancybox]").fancybox({loop:true,buttons:["zoom","close"]})}initPopupClose()},error:function(xhr,ajaxOptions,thrownError){$("body").hideLoader()}})});if($(".js-sertificates-slider").length>0){$(".js-sertificates-slider").slick({infinite:true,dots:true,slidesToShow:6,prevArrow:$(".js-sertificates-slider-btn-prev"),nextArrow:$(".js-sertificates-slider-btn-next"),appendDots:$(".js-sertificates-slider-pagination"),responsive:[{breakpoint:1365,settings:{slidesToShow:5}},{breakpoint:992,settings:{slidesToShow:4}},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2}}]})}if($(".js-product-set-slider").length>0){$(".js-product-set-slider").each(function(){var self=$(this);self.slick({infinite:true,dots:true,slidesToShow:4,prevArrow:self.parents(".product-set-slider__wrapper").find(".js-product-set-slider-btn-prev"),nextArrow:self.parents(".product-set-slider__wrapper").find(".js-product-set-slider-btn-next"),appendDots:self.parents(".product-set-slider__wrapper").find(".js-product-set-slider-pagination"),responsive:[{breakpoint:1550,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:1200,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:767,settings:{slidesToShow:1,slidesToScroll:1,variableWidth:true}}]})})}if($(".js-articles-cards-slider").length>0){$(".js-articles-cards-slider").slick({infinite:true,dots:true,slidesToShow:3,prevArrow:$(".js-articles-cards-slider-btn-prev"),nextArrow:$(".js-articles-cards-slider-btn-next"),appendDots:$(".js-articles-cards-slider-pagination"),responsive:[{breakpoint:1550,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:620,settings:{slidesToShow:1,slidesToScroll:1}}]})}let $_main=$(".main");let $_fixed_panel=$(".js-fixed-panel");let $_panel=$(panel);let $_fixed_panel_is_visible=false;$(window).on("scroll",function(e){if($(this).scrollTop()>500){if(!$_fixed_panel_is_visible){$_fixed_panel_is_visible=true;$_fixed_panel.addClass("is-visible")}if(typeof panel_height!=="undefined"&&$_panel.offset().top+$_panel.outerHeight()+$_fixed_panel.height()<$_main.offset().top+$_main.height()){if(!$_fixed_panel.hasClass("is-floating")){$_fixed_panel.addClass("is-floating");$_fixed_panel.css({position:"fixed"})}$_fixed_panel.css({top:panel_height})}else{if($_fixed_panel.hasClass("is-floating")){$_fixed_panel.removeClass("is-floating");$_fixed_panel.css({position:"absolute",top:$_main.offset().top+$_main.height()-$_fixed_panel.height()})}}}else{if($_fixed_panel_is_visible){$_fixed_panel_is_visible=false;$_fixed_panel.removeClass("is-visible").css({top:""});$_fixed_panel.toggleClass("is-floating",false)}}});$(".js-remove-fixed-panel").on("click",function(e){$(this).parents(".js-fixed-panel").remove()});$("[data-fancybox]").fancybox({loop:true,buttons:["zoom","close"]});$(".cabinet-support-chat__form--file .btn-close").on("click",function(e){e.preventDefault();$(".cabinet-support-chat__form input[type=file]").val("");$(".cabinet-support-chat__form--file span").html("");$(".cabinet-support-chat__form--file").removeClass("is-visible")});$(".cabinet-support-chat__form input[type=file]").on("change",function(e){var self=$(this);var value=self.val().split("\\").pop();$(".cabinet-support-chat__form--file span").html(value);$(".cabinet-support-chat__form--file").addClass("is-visible")});$(".js-toggle-stock-details-btn").on("click",function(e){e.preventDefault();$(this).toggleClass("is-toggled");$(this).parents(".cabinet-stock-content__text").find(".cabinet-stock-content__text-description .hidden-text").stop().slideToggle(250)});$(".js-input-date").each(function(){var el=$(this);$(this).attr("autocomplete","off");$(this).datepicker({monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],dateFormat:"dd.mm.yy",maxDate:el.attr("name")=="birthday"?0:null,changeYear:true,setDate:new Date})});$(".js-select").each(function(){$(this).selectmenu()});$(".cart-content, .cart-aside").theiaStickySidebar({additionalMarginTop:20});$(".styled-scroll").overlayScrollbars({overflowBehavior:{x:"hidden"}});$(".js-styled-scroll").overlayScrollbars({overflowBehavior:{x:"hidden"}});$(".compare-table").overlayScrollbars({overflowBehavior:{y:"hidden"}});$(".catalog-menu__brands").overlayScrollbars({overflowBehavior:{y:"hidden"}});$(document).on("click",".js-product-to-cart",function(event){let button=$(this);let $product_area=button.closest(".product-area"),product_id=$product_area.data("id"),quantity=1,services=[];if(button.data("type")=="product-page"){quantity=$product_area.find('input[name="quantity"]').val()??2;$("[name^=service][type=checkbox]").each(function(){if($(this).is(":checked"))services.push($(this).val())})}else{quantity=button.closest(".card").data("qty")??1}let data={product_id:product_id,quantity:quantity,services:services};$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:data,dataType:"json",beforeSend:function(){$product_area.showLoader()},complete:function(){$product_area.hideLoader()},success:function(json){if(json["redirect"]){window.location=json["redirect"]}if(json["success"]){$("[data-id="+product_id+"]").each(function(){$(this).find(".js-product-to-cart").addClass("is-added").find(".btn-add__text").text(json["product_in_cart"])});$("#head_cart").load("index.php?route=common/cart/info",function(){initHeadBlocks()})}},error:function(xhr,ajaxOptions,thrownError){$product_area.hideLoader();console.log(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})});$(document).on("click",".js-product-to-compare",function(event){var button=$(this);var is_added=button.hasClass("is-added");var url="index.php?route=product/compare/add";if(is_added){url="index.php?route=product/compare/remove"}var product_id=button.closest(".product-area").data("id");$.ajax({url:url,type:"post",data:"product_id="+product_id,dataType:"json",beforeSend:function(){button.closest(".product-area").showLoader()},complete:function(){button.closest(".product-area").hideLoader()},success:function(json){if(json["success"]){$("[data-id="+product_id+"]").each(function(){$(this).find(".js-product-to-compare").toggleClass("is-added",!is_added)});$("#head_compare").load("index.php?route=product/compare/info",function(){initHeadBlocks()})}},error:function(xhr,ajaxOptions,thrownError){button.closest(".product-area").hideLoader();console.log(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})});$(document).on("click",".js-product-remove-from-compare",function(e){e.preventDefault();var button=$(this);$.ajax({url:"index.php?route=product/compare/remove",type:"post",data:"product_id="+button.data("productId"),dataType:"json",success:function(json){if(json["success"]){$("[data-id="+button.data("productId")+"]").each(function(){$(this).find(".js-product-to-compare").removeClass("is-added")});$("#head_compare").load("index.php?route=product/compare/info",function(){initHeadBlocks()});$(".js-compare-categories .is-active").click()}},error:function(xhr,ajaxOptions,thrownError){console.log(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})});$(document).on("click",".js-close-popup-btn",function(e){e.preventDefault();$(this).parents(".js-popup").fadeOut(300,function(){let $popup=$(this);if($popup.hasClass("is-dynamic-popup")){$popup.remove()}});$("html").removeClass("is-fixed")});var popup_mouse_down=false;$(document).on("mousedown",".popup__overflow",function(e){e.stopPropagation();popup_mouse_down=e.target});$(document).on("click",".popup__overflow",function(e){var content=$(this).find(".popup__body");if(e.target==popup_mouse_down&&!content.is(e.target)&&content.has(e.target).length===0){$("html").removeClass("is-fixed");$(".js-popup").fadeOut(300,function(){$(".is-dynamic-popup").remove()})}});$(document).on("click",".js-toggle-product-card-labels-btn",function(event){event.preventDefault();$(this).parents(".product-labels").find(".product-label__hidden").toggleClass("is-toggled");$(this).toggleClass("is-toggled")});$(document).on("click",".js-open-cart-clear-popup-btn",function(e){e.preventDefault();$(".js-popup-callback").remove();$.ajax({url:"index.php?route=common/popup/clear_cart",type:"post",dataType:"json",beforeSend:function(){$("body").showLoader()},complete:function(){$("body").hideLoader()},success:function(response){if(response.html){$("body").append(response.html)}}})});window.addEventListener("pageshow",event=>{$("#head_cart").load("index.php?route=common/cart/info",function(){initHeadBlocks()});$("#head_compare").load("index.php?route=product/compare/info",function(){initHeadBlocks()})});initGuestAccountPopup();initCustom();initHeadBlocks();initCompare()});function getURLVar(key,url_str){var value=[],url=url_str||document.location;var query=String(url).split("?");if(query[1]){var part=query[1].split("&");for(i=0;i<part.length;i++){var data=part[i].split("=");if(data[0]&&data[1]){value[data[0]]=data[1]}}if(value[key]){return value[key]}else{return""}}}function fallbackCopyTextToClipboard(text){var textArea=document.createElement("textarea");textArea.value=text;textArea.style.top="0";textArea.style.left="0";textArea.style.position="fixed";document.body.appendChild(textArea);textArea.focus();textArea.select();try{var successful=document.execCommand("copy");var msg=successful?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+msg)}catch(err){console.error("Fallback: Oops, unable to copy",err)}document.body.removeChild(textArea)}function copyTextToClipboard(text){if(!navigator.clipboard){fallbackCopyTextToClipboard(text);return}navigator.clipboard.writeText(text).then(function(){console.log("Async: Copying to clipboard was successful!")},function(err){console.error("Async: Could not copy text: ",err)})}function initProductCardSlider(self){self.slick({infinite:true,slidesToScroll:5,slidesToShow:5,dots:true,appendDots:self.closest(".products-cards-slider__wrapper").find(".js-products-cards-slider-pagination"),prevArrow:self.closest(".products-cards-slider__wrapper").find(".js-products-cards-slider-btn-prev"),nextArrow:self.closest(".products-cards-slider__wrapper").find(".js-products-cards-slider-btn-next"),responsive:[{breakpoint:1550,settings:{slidesToScroll:5,slidesToShow:5}},{breakpoint:1368,settings:{slidesToScroll:4,slidesToShow:4}},{breakpoint:1200,settings:{slidesToScroll:3,slidesToShow:3}},{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2}}]})}var initHeadBlocks=function(){$(".js-product-remove-from-cart").unbind().on("click",function(event){var button=$(this);$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+button.data("key"),dataType:"json",success:function(json){$("[data-id="+button.data("productId")+"]").each(function(){$(this).find(".js-product-to-cart").removeClass("is-added").find(".btn-add__text").text(json["product_to_cart"])});$("#head_cart").load("index.php?route=common/cart/info",function(){initHeadBlocks();if($(".js-checkout-cart-products").length)$(".js-checkout-cart-product-quantity").eq(0).trigger("change")})},error:function(xhr,ajaxOptions,thrownError){console.log(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})});$(".styled-scroll").overlayScrollbars({overflowBehavior:{x:"hidden"}})};function setFaqViewed(faq_id){$.ajax({url:"index.php?route=faq/faq/update_viewed",type:"post",data:"faq_id="+faq_id,dataType:"json",success:function(json){}})}function setFaqLiked(faq_id){$.ajax({url:"index.php?route=faq/faq/set_like",type:"post",data:"faq_id="+faq_id,dataType:"json",success:function(json){if(json.status=="success"){$("#faq-"+faq_id).find(".likes").find("span").text(json.liked)}}})}function setArticleLiked(article_id){$.ajax({url:"index.php?route=blog/article/set_like",type:"post",data:"article_id="+article_id,dataType:"json",success:function(json){if(json.status=="success"){$(".article-card[data-id="+article_id+"] .likes span").text(json.liked)}}})}function setNewsLiked(news_id,like){if(typeof like=="undefined")like=1;var dislike=like==1?0:1;$.ajax({url:"index.php?route=news/news/set_like",type:"post",data:{news_id:news_id,like:like,dislike:dislike},dataType:"json",success:function(json){if(json.status=="success"){$(".article-card[data-id="+news_id+"] .likes span").text(json.liked)}}})}function initGuestAccountPopup(){$(".js-open-login-popup-btn").unbind().on("click",function(e){e.preventDefault();$.ajax({url:"index.php?route=account/login/popup_login",type:"post",dataType:"json",beforeSend:function(){$("body").showLoader()},complete:function(){$("body").hideLoader()},success:function(json){$("#popup-login").remove();$("body").append(json["form"]);$(".js-popup-registration").fadeOut(300);$(".js-popup-login").fadeIn(300);$("html").addClass("is-fixed");initGuestAccountPopup();initPopupClose();initCustom()},error:function(xhr,ajaxOptions,thrownError){$("body").hideLoader()}})});$(".js-popup-login form").bind("submit",function(e){e.preventDefault();var form_el=$(this);form_el.find(".is-error").removeClass("is-error");var email_el=form_el.find("input[name=email]");var pass_el=form_el.find("input[name=password]");email_el.closest(".form-group").toggleClass("is-error",!validateEmail(email_el.val()));pass_el.closest(".form-group").toggleClass("is-error",$.trim(pass_el.val()).length<4);if(form_el.find(".is-error").length===0){ajax_sendmessage(form_el,"/index.php?route=account/login/login",function(data){if(data["status"]){if(data["status"]==="success"){if(data["redirect"]){window.location.href=data["redirect"]}else{form_el.closest(".popup__content").html('<p class="popup__subtitle text-center">'+data["message"]+"</p>");setTimeout("window.location.reload()",5e3)}}else{form_el.closest(".popup__content").find(".error_message").addClass("is-error").html('<div class="form-group__error">'+data["message"]+"</div>")}}})}return false});$(".js-open-password-popup-btn").unbind().on("click",function(e){e.preventDefault();$.ajax({url:"index.php?route=account/forgotten/popup_password",type:"post",dataType:"json",beforeSend:function(){$("body").showLoader()},complete:function(){$("body").hideLoader()},success:function(json){$(".js-popup-password").remove();$("body").append(json["form"]);$(".js-popup-login").fadeOut(300);$(".js-popup-password").fadeIn(300);$("html").addClass("is-fixed");initGuestAccountPopup();initPopupClose();initCustom()},error:function(xhr,ajaxOptions,thrownError){$("body").hideLoader()}})});$(".js-popup-password form").bind("submit",function(e){e.preventDefault();var form_el=$(this);form_el.find(".is-error").removeClass("is-error");var email_el=form_el.find("input[name=email]");email_el.closest(".form-group").toggleClass("is-error",!validateEmail(email_el.val()));if(form_el.find(".is-error").length===0){ajax_sendmessage(form_el,"/index.php?route=account/forgotten/forgotten",function(data){if(data["status"]){if(data["status"]==="success"){if(data["redirect"]){window.location.href=data["redirect"]}else{form_el.closest(".popup__content").html('<p class="popup__subtitle text-center">'+data["message"]+"</p>");setTimeout("window.location.reload()",5e3)}}else{form_el.closest(".popup__content").find(".error_message").addClass("is-error").html('<div class="form-group__error">'+data["message"]+"</div>")}}})}return false});$(".js-open-registration-popup-btn").unbind().on("click",function(e){e.preventDefault();$.ajax({url:"index.php?route=account/register/popup_register",type:"post",dataType:"json",beforeSend:function(){$("body").showLoader()},complete:function(){$("body").hideLoader()},success:function(json){$(".js-popup-registration").remove();$("body").append(json["form"]);$(".js-popup-login").fadeOut(300);$(".js-popup-registration").fadeIn(300);$("html").addClass("is-fixed");initGuestAccountPopup();initPopupClose();initCustom()},error:function(xhr,ajaxOptions,thrownError){$("body").hideLoader()}})});$(".js-popup-registration form").bind("submit",function(e){e.preventDefault();var form_el=$(this);form_el.find(".is-error").removeClass("is-error");var firstname_el=form_el.find("input[name=firstname]");var lastname_el=form_el.find("input[name=lastname]");var email_el=form_el.find("input[name=email]");var pass_el=form_el.find("input[name=password]");var confirm_el=form_el.find("input[name=confirm]");var policy_el=form_el.find("input[name=agree]");firstname_el.closest(".form-group").toggleClass("is-error",$.trim(firstname_el.val()).length<2);lastname_el.closest(".form-group").toggleClass("is-error",$.trim(lastname_el.val()).length<2);email_el.closest(".form-group").toggleClass("is-error",!validateEmail(email_el.val()));pass_el.closest(".form-group").toggleClass("is-error",$.trim(pass_el.val()).length<4);confirm_el.closest(".form-group").toggleClass("is-error",$.trim(confirm_el.val()).length<4||pass_el.val()!==confirm_el.val());policy_el.closest(".form-group").toggleClass("is-error",!policy_el.is(":checked"));if(form_el.find(".is-error").length===0){ajax_sendmessage(form_el,"/index.php?route=account/register/register",function(data){if(data["status"]){if(data["status"]==="success"){if(data["redirect"]){window.location.href=data["redirect"]}else{form_el.closest(".popup__content").html('<p class="popup__subtitle text-center">'+data["message"]+"</p>");setTimeout("window.location.reload()",5e3)}}else{form_el.closest(".popup__content").find(".error_message").addClass("is-error").html('<div class="form-group__error">'+data["message"]+"</div>")}}})}return false})}function initPhoneMask(){$("input[type=tel]").inputmask({mask:"+7 (999) 999-9999",clearIncomplete:false})}function initCustom(){$(".js-required-input").on("focus change",function(){if($(this).parents(".form-group").hasClass("is-error")){$(this).parents(".form-group").removeClass("is-error")}});$(".js-show-input-password-btn").unbind("click").on("click",function(){var input=$(this).parents(".form-group").find(".js-pw-input");$(this).toggleClass("is-active");input.attr("type",input.attr("type")==="password"?"text":"password")});initPhoneMask()}function initCompare(){compareClearAll=function(document_reload=false){$.ajax({url:"index.php?route=product/compare/clear_all",type:"post",data:{},dataType:"json",beforeSend:function(){$("body").showLoader()},success:function(json){if(document_reload)document.location.reload();else $("#head_compare").load("index.php?route=product/compare/info",function(){initHeadBlocks();$("body").hideLoader();$(".js-close-popup-btn").click();$(".js-product-to-compare.is-added").removeClass("is-added")})},error:function(xhr,ajaxOptions,thrownError){$("body").hideLoader();console.log(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})};$(".js-toggle-compare-table-btn").unbind().on("click",function(e){let $_this=$(this),$_this_wrapper=$_this.parents(".compare-table__wrapper");e.preventDefault();$_this.toggleClass("is-toggled");$_this_wrapper.find(".compare-table").stop().slideToggle(250);$_this_wrapper.find(".js-compare-table__tds").slick("setPosition")});$(document).on("click",".js-open-compare-clear-popup",function(e){e.preventDefault();let $_popup=$(".js-popup-confirm");$_popup.find(".js-popup-confirm-title").text("Удалить все товары из сравнения?");$_popup.find(".js-popup-confirm-btn").attr("onclick","compareClearAll("+$(this).data("is_compare_page")+")");$_popup.find(".js-popup-confirm-btn-text").text("Да, удалить");$_popup.fadeIn(300);$("html").addClass("is-fixed")})}function initPopupClose(){}function validateEmail(email){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)}function validatePhone(phone){return/((8|\+7)[ ]{1})(\(\d{3}\)[ ]{1})\d{3}[\-]{1}\d{4}/.test(phone)}function validateForm(form_el,min_length_input){form_el.find(".is-error").removeClass("is-error");if(typeof min_length_input=="undefined")min_length_input=1;$(".js-required-input",form_el).each(function(){var valid=true;if($(this).is(":checkbox")){valid=!$(this).is(":checked")}else{if($(this).attr("name")=="email"){valid=!validateEmail($(this).val())}else if($(this).attr("name")=="telephone"||$(this).attr("name")=="phone"){valid=!validatePhone($(this).val())}else{valid=$.trim($(this).val()).length<min_length_input}}$(this).closest(".form-group").toggleClass("is-error",valid)});return form_el.find(".is-error").length===0}function ajax_sendmessage(form_el,url,callback,form_data){$("body").showLoader();var jqCaptchaEl=form_el.find("input[name=g-recaptcha-response]");if(form_el.find("input[name=state]").length>0)form_el.find("input[name=state]").val("verify");if(jqCaptchaEl.length>0&&jqCaptchaEl.data("sitekey")&&grecaptcha){grecaptcha.ready(function(){grecaptcha.execute(jqCaptchaEl.data("sitekey"),{action:"submit"}).then(function(token){form_el.find("input[name=g-recaptcha-response]").val(token);var data=form_el.serializeArray();if(!form_data){form_data=new FormData;$("input[type=file]",form_el).each(function(i,el){var el_file=$(this);$.each(el_file[0].files,function(i,file){form_data.append($(el_file).attr("name"),file)})})}for(var i=0;i<data.length;i++){if(form_data.has(data[i].name)){form_data.set(data[i].name,data[i].value)}else{form_data.append(data[i].name,data[i].value)}}$.ajax({cache:false,contentType:false,processData:false,type:"POST",dataType:"json",url:url,data:form_data,complete:function(){$("body").hideLoader()},success:function(response){if(typeof callback=="function")callback(response,form_el)},error:function(xhr,ajaxOptions,thrownError){$("body").hideLoader()}})})})}else{var data=form_el.serializeArray();if(!form_data){form_data=new FormData;$("input[type=file]",form_el).each(function(i,el){var el_file=$(this);$.each(el_file[0].files,function(i,file){form_data.append($(el_file).attr("name"),file)})})}for(var i=0;i<data.length;i++){if(form_data.has(data[i].name)){form_data.set(data[i].name,data[i].value)}else{form_data.append(data[i].name,data[i].value)}}$.ajax({cache:false,contentType:false,processData:false,type:"POST",dataType:"json",url:url,data:form_data,complete:function(){$("body").hideLoader()},success:function(response){if(typeof callback=="function")callback(response,form_el)},error:function(xhr,ajaxOptions,thrownError){$("body").hideLoader()}})}}if(document.getElementById("head_panel")){var panel=document.getElementById("head_panel");var panel_top=panel.offsetTop;var panel_height=panel.offsetHeight}function fixed_panel(){var scrollTop=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop;if(scrollTop>=panel_top){panel.style.position="fixed";document.getElementsByClassName("header-top")[0].style.marginBottom=panel_height+"px";document.getElementsByClassName("catalog-menu")[0].style.marginTop=panel_height+"px";document.getElementsByClassName("catalog-menu")[0].style.marginTop=panel_height+"px"}else{panel.style.position="relative";document.getElementsByClassName("header-top")[0].style.marginBottom="";document.getElementsByClassName("catalog-menu")[0].style.marginTop=panel_top+panel_height+"px"}}window.addEventListener("pageshow",event=>{console.log("Is cache debug. Remove after develop. Cache mode:");if(event.persisted){console.log("bfcache")}else{console.log("normal")}});